# Haskell: Build tools (настраиваем окружение)

Данный документ описывает рекомендуемый способ создания и сборки проектов на языке Haskell с использованием системы сборки `stack`.

## Рекомендации по установке

Для установки большинства необходимых программ и утилит рекомендуется использовать [GHCup](https://www.haskell.org/ghcup/). С его помощью можно легко установить различные версии `GHC`, `stack` и `HLS` (Haskell Language Server).

Для следования стайл-гайду рекомендуем также установить линтер `hlint` и форматтер `stylish-haskell`, а также соответствующие плагины для вашего любимого текстового редактора (при наличии). Конфигурации для них вы можете найти в соответствующем документе.

## Использование системы сборки `stack`

* `stack new my-project` - создать новый проект с именем `my-project`
* `stack build` - собрать проект
* `stack ghci` - запустить интерактивный режим `ghci` в вашем проекте
* `stack test` - запустить тесты, объявленные в секции `tests` в файле `package.yaml`
* `stack run my-project-exe` - собрать проект и запустить executable `my-project-exe`, объявленный в секции `executables` файле `package.yaml` 

> При выполнении команды `stack build` после модификации `package.yaml` вы можете заметить, что `.cabal` файл автоматически изменяется соответствующим образом. Это происходит благодаря утилите `hpack`, которая автоматически запускается при запуске `stack build`. Не рекомендуется изменять `.cabal` файл самостоятельно.

## Добавление зависимостей

> В некоторых домашних заданиях вам может потребоваться использование сторонних библиотек. Данная секция содержит инструкцию по добавлению зависимостей в ваш `stack` проект.

Для добавления зависимостей будем использовать `package.yaml` файл. Если вы откроете этот файл в проекте, созданном с помощью `stack new`, то увидите что он разделен на три секции - `library`, `executable` и `tests`.

* `library` отвечает за все модули в папке `src`
* `executables` отвечает за все модули в папке `app`
* `tests` отвечает за все модули в папке `test`

В каждую из этих секций можно добавить пункт `dependencies` (в случае, если он отсутствует) и перечислить необходимые пакеты (как объявленные в вашем проекте так и опубликованные на `hackage`). Пример:

```
dependencies:
  - mtl
  - directory
  - text
```